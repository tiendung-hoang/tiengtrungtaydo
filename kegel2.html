<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kegel Exercise Machine</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input {
            width: 60px;
            margin: 10px;
            padding: 5px;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #status {
            font-size: 24px;
            margin: 20px 0;
        }
        #timer {
            font-size: 48px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Kegel Exercise Machine</h1>
        <div>
            <label>Sets: <input type="number" id="sets" value="5" min="1"></label>
        </div>
        <div>
            <label>Contract (s): <input type="number" id="contractTime" value="5" min="1"></label>
        </div>
        <div>
            <label>Relax (s): <input type="number" id="relaxTime" value="5" min="1"></label>
        </div>
        <button id="startBtn" onclick="startExercise()">Start</button>
        <div id="status">Ready</div>
        <div id="timer">0</div>
        <div id="setCounter">Set: 0 / 0</div>
    </div>

    <audio id="contractBeep" preload="auto">
        <source src="https://www.soundjay.com/buttons/beep-01a.mp3" type="audio/mpeg">
    </audio>
    <audio id="relaxBeep" preload="auto">
        <source src="https://www.soundjay.com/buttons/beep-02.mp3" type="audio/mpeg">
    </audio>

    <script>
        let isRunning = false;
        let currentSet = 0;
        let totalSets = 0;
        let contractTime = 0;
        let relaxTime = 0;
        let isContracting = true;
        let timeLeft = 0;
        let intervalId = null;

        const contractBeep = document.getElementById('contractBeep');
        const relaxBeep = document.getElementById('relaxBeep');
        const startBtn = document.getElementById('startBtn');
        const statusDiv = document.getElementById('status');
        const timerDiv = document.getElementById('timer');
        const setCounterDiv = document.getElementById('setCounter');

        function startExercise() {
            if (isRunning) return;
            isRunning = true;
            startBtn.disabled = true;
            startBtn.textContent = 'Running...';

            totalSets = parseInt(document.getElementById('sets').value) || 5;
            contractTime = parseInt(document.getElementById('contractTime').value) || 5;
            relaxTime = parseInt(document.getElementById('relaxTime').value) || 5;
            currentSet = 0;
            isContracting = true;
            timeLeft = contractTime;

            updateSetCounter();
            startSet();
        }

        function startSet() {
            if (currentSet >= totalSets) {
                stopExercise();
                return;
            }

            statusDiv.textContent = isContracting ? 'Contract' : 'Relax';
            timerDiv.textContent = timeLeft;
            playBeep(isContracting ? contractBeep : relaxBeep);

            intervalId = setInterval(() => {
                timeLeft--;
                timerDiv.textContent = timeLeft;

                if (timeLeft <= 0) {
                    isContracting = !isContracting;
                    timeLeft = isContracting ? contractTime : relaxTime;

                    if (!isContracting && timeLeft === relaxTime) {
                        currentSet++;
                        updateSetCounter();
                    }

                    if (currentSet >= totalSets && !isContracting) {
                        stopExercise();
                        return;
                    }

                    statusDiv.textContent = isContracting ? 'Contract' : 'Relax';
                    playBeep(isContracting ? contractBeep : relaxBeep);
                    timerDiv.textContent = timeLeft;
                }
            }, 1000);
        }

        function stopExercise() {
            clearInterval(intervalId);
            isRunning = false;
            startBtn.disabled = false;
            startBtn.textContent = 'Start';
            statusDiv.textContent = 'Finished';
            timerDiv.textContent = '0';
        }

        function updateSetCounter() {
            setCounterDiv.textContent = `Set: ${currentSet + 1} / ${totalSets}`;
        }

        function playBeep(beep) {
            beep.currentTime = 0;
            beep.play().catch(error => console.log('Beep error:', error));
        }
    </script>
</body>
</html>
